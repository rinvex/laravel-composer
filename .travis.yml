language: php

php:
  - 7.0
  - 7.1

env:
  matrix:
    - COMPOSER_FLAGS="--prefer-lowest"
    - COMPOSER_FLAGS=""

before_script:
  - travis_retry composer self-update
  - travis_retry composer update ${COMPOSER_FLAGS} --no-interaction --prefer-source

script:
  - vendor/phpunit/phpunit/phpunit --coverage-text --coverage-clover=coverage.clover

after_script:
  - wget https://scrutinizer-ci.com/ocular.phar
  - php ocular.phar code-coverage:upload --format=php-clover coverage.clover

notifications:
  slack:
    rooms:
      - secure: PN8zPA26Gr9Qz44B57CdM3nkG3DTksN3/jXME72D3mwlYeuciQ4G55LqaZxcI3y+cgHtjRbqwPrb0LLJ/mDMkGJtHxEhuAfcrHL/cdIy5jivvQ9QhnZGchWaLvnBlTVqwBs5gAcAcAucMj65JjdksASpTUwGhWRaLWJBo29yJu8JxDLl1oPkhZ82HrGx4R0Z3mQwvU6yuwJ5fhJVu979EcNVMDYYVnY9f/MqI2LprmfwD57b0cak+jid1GnTY/K59/Ch0U1sbtpptqiJhGI0Wih2jAtf41TM2TT8akQjM/Kt62ojSIJX1KIVFRHlw9ot4appLn67HurETbgCmNwBx3KkieNSiYGiFTY2YxeVbmnDp1RxF94yBL+mfJKsFddJOJdEz/idXww/Za03brkHsRzqRGPJkSzCHNRo6NQBcIdnUejtgcOFofhDqz5bpPHM6AgqtiN2T0gJj9OTwV480I9n5vcJIED39MGEcYE9V/pGuACQweTaiy4hjr9tt6Su7amjMIT1urP4d2YJtx0Ylt3M47XTqJpypF1XsMYCEG0MXp7s42STj1d7pzfQsPquOQ1anxAYAvbg6jJLYgrZ7oA0EY0r+bzelsQ++KiboniYF/EMDZKGmW6xNWjeB9qvDl8lx5obADRHJ0dA+ycOssvN0qcNBC7hqhCjqeVUnnA=
